{% extends 'admin/base.html' %}
{% block content%}
    <!-- THE BOOK UPLOAD FORM -->
    <div class="book">
        <h2>Upload a book</h2>
        <form action="" method="POST" enctype="multipart/form-data" id="form">
            <div class="input-box">
                <input type="text" name="author" required />
                <span>Title</span>
            </div>
            <div class="input-box">
                <input type="text" name="title" required />
                <span>Author</span>
            </div>
            <div class="input-box">
                <label for="book">Book here</label>
                <input type="file" name="book" required />
            </div>
            <button type="submit">Upload book</button>
        </form>

        <!-- THE LIST OF ALL THE BOOKS-->
        <div class="all-data">
            <table id="data">
                <tr>
                    <th>S/N</th>
                    <th>Title</th>
                    <th>Author</th>
                    <th>Book file</th>
                    <th>Controls</th>
                </tr>
            {% if books %}
            {% for book in books %}
                <tr>
                    <td>{{book.id}}</td>
                    <td>{{book.title}}</td>
                    <td>{{book.author}}</td>
                    <td><a href="{{url_for('static', filename='books/'+book.name)}}" id="file">{{book.title.lower().replace(" ","")}}.pdf</a></td>
                    <td>
                        <a href="{{url_for('edit_book', id=book.id)}}" class="edit">Edit</a>
                        <a href="{{url_for('delete_book', id=book.id)}}" class="del">Delete</a>
                    </td>
                </tr>
            {% endfor %}
            {% else %}
                <h1>No Books Available Yet.</h1>
            {% endif %}
            </table>
        </div>
    </div>
{% endblock %}